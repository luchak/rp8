pico-8 cartridge // http://www.pico-8.com
version 34
__lua__
-- event sequencer test

#include events.lua

function printarray(t)
 local s=''
 for x in all(t) do
  s..=x..','
 end
 print(s)
end

function printtab(t)
 local s=''
 for k,v in pairs(t) do
  s..=k..'='..tostr(v)..','
 end
 print(s)
end

tl=timeline_new({43,45,46,47})

tl:load_bar(1)
printarray(tl.state)
tl:record_event(2,55)
tl:next_tick()
printarray(tl.state)
tl:toggle_recording()
tl:toggle_recording()
tl:load_bar(1)
print('oof')
printtab(tl.bars[1])
printarray(tl.state)
tl:next_tick()
printarray(tl.state)


print('rec test')
tl:toggle_recording()
tl:load_bar(1)
printarray(tl.state)
tl:record_event(2,55)
tl:load_bar(1)
printarray(tl.state)
tl:next_tick()
tl:record_event(2,65)
tl:next_tick()
printarray(tl.state)
tl:toggle_recording()
tl:load_bar(1)
printarray(tl.state)
tl:next_tick()
tl:next_tick()
printarray(tl.state)
tl:load_bar(2)
printarray(tl.state)

__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
